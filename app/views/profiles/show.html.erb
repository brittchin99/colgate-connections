

<!--<meta name="viewport" content="width=device-width, initial-scale=1">-->
<!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">-->
<!--<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>-->
<!--<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>-->
<!--<script src="https://raw.githack.com/SortableJS/Sortable/master/Sortable.js"></script>-->

<head>
  <%= stylesheet_link_tag 'application', media: 'all' %>
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css" integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://raw.githack.com/SortableJS/Sortable/master/Sortable.js"></script>
</head>
<div class="main">
  
  <% if !@profile.pending_friend_request?(current_account.profile) and !!current_account.profile.pending_friend_request?(@profile) %>
    <div class="alert alert-secondary" role="alert">
      <%= @profile.first_name %> would like to connect with you.
      <%= link_to "Accept", connections_path(:friend_id => @profile), :method => :post, :class => "btn btn-primary spacer" %>
      <%= link_to "Delete", friend_request_path(:friend_id => @profile), :method => :delete, :class => "btn btn-light" %>
    </div>
  <% end %>
  
  <% if flash[:success] %>
    <div class="alert alert-success notice alert-dismissible alert-notif" role="alert">
      <%= "#{flash[:success]}" %>
      <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
    </div>
  <% end %>
  <% if flash[:notice] %>
    <div class="alert alert-primary notice alert-dismissible alert-notif" role="alert">
      <%= "#{flash[:notice]}" %>
      <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
    </div>
  <% end %>
  <% if flash[:alert] %>
    <div class="alert alert-warning notice alert-dismissible alert-notif" role="alert">
      <%= "#{flash[:alert]}" %>
      <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
    </div>
  <% end %>
  
  <% if current_account.profile == @profile %>
    <%= link_to "", setting_path(:id => current_account.id), :class => "btn fas fa-cog setting" %>
  <% end %>
  <div class="profile-container">
    
      <!--check logged in to the right user -->
      <% if current_account.profile == @profile %>
        <%= link_to "Update Profile", edit_profile_path(@profile), :class => "btn btn-primary update-button" %>
      <% end %>
      <div class="profile-basic">
            <% if @profile.avatar.attached? %>
              <img class="profile-image-circle" src="<%= (url_for(@profile.avatar)) %>">
            <% else %>
              <div class="profile-image-circle"></div>
            <% end %>
            <div class="profile-text">
                 <h4><%= "#{@profile.first_name} #{@profile.last_name}" %> </h4>
                 <p> <%= "#{@profile.pronouns}"%></p>   
                  <!--check logged in to the right user -->
                  <% if @profile.status %>
                      <%= "#{@profile.status}"%>
                  <% end %>
                  <% if current_account.profile==@profile %>
                     <% if !@profile.status %>
                        <button onclick="toggle()" class="add-button" id="profile-status">Add a status</button>                      
                      <% end %>
                  <% end %>
                  <!--connected & message button -->
                  <div>
                    <% if current_account.profile!=@profile && !current_account.profile.connected_to(@profile) %>
                      <% if @profile.pending_friend_request?(current_account.profile) %>
                        <div><%= link_to "Unsend Friend Request", friend_request_path(:friend_id => @profile), :method => :delete, :class => "btn btn-secondary" %></div>
                      <% elsif !current_account.profile.pending_friend_request?(@profile) %>
                        <div><%= link_to "Send Friend Request", friend_requests_path(:friend_id => @profile), :method => :post, :class => "btn btn-primary" %></div>
                      <% else %>
                        <div><%= link_to "Accept", connections_path(:friend_id => @profile), :method => :post, :class => "btn btn-primary" %></div>
                        <div><%= link_to "Delete", friend_request_path(:friend_id => @profile), :method => :delete, :class => "btn btn-light" %></div>
                      <% end %>

                    <% elsif current_account.profile.connected_to(@profile) %>
                      <div><%= link_to "Disconnect", connection_path(:friend_id => @profile), :method => :delete, :class => "btn btn-success" %></div>
                      <%= link_to "Message #{@profile.first_name}", conversations_path(:sender_id => current_account, :receiver_id => @profile), :method => :post, :class => "btn btn-primary" %>
                    <% end %>
                  </div>
                  <br/>
                 
            </div>
            <% if flash[:notice] %>
              <div class="alert alert-primary notice top-alert">
                <%= "#{flash[:notice]}" %>
              </div>
            <% end %>
            <% if flash[:alert] %>
              <div class="alert alert-warning alert top-alert">
                <%= "#{flash[:alert]}" %>
              </div>
            <% end %>
      </div> 

</div>
    
    
<script>
function f() {
  alert("Not implemented yet");
}
</script>